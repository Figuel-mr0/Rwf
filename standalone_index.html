<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ù…Ø·ÙˆØ± Ø¬Ø¯Ø§Ù‹</title>
    <link rel="stylesheet" href="../static/styles.css">
    <style>

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f4f8; 
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        header {
            background: linear-gradient(135deg, #3a7bd5, #00d2ff); 
            color: white;
            padding: 20px; 
            text-align: center;
            font-size: 26px; 
            font-weight: bold;
            box-shadow: 0 2px 10px rgba(0,0,0,0.15);
            display: flex;
            justify-content: space-between; 
            align-items: center;
        }
        .header-buttons button {
            background-color: #ffffff30; 
            color: white;
            border: 1px solid white;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
            margin-left: 10px; /* RTL margin */
        }
        .header-buttons button:hover {
            background-color: #ffffff50;
        }
        #apiStatusIndicator {
            font-size: 12px;
            padding: 5px 10px;
            border-radius: 10px;
            margin-left: 15px; /* RTL margin */
            background-color: #dc3545; /* Default to error/not connected */
            color: white;
        }
        #apiStatusIndicator.connected {
            background-color: #28a745; /* Green for connected */
        }

        .main-container {
            display: flex;
            flex: 1;
            gap: 20px; 
            padding: 20px;
        }
        .task-container {
            flex: 2.5; 
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .ai-container {
            flex: 1.5; 
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            max-height: 700px; 
        }
        .stats {
            display: flex;
            justify-content: space-around; 
            margin-bottom: 20px;
            gap: 15px;
        }
        .stat {
            flex: 1;
            background: #e9ecef; 
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            font-weight: bold;
            font-size: 15px;
            color: #343a40;
        }
        #addTaskBtn {
            background: #28a745; 
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 17px;
            margin-bottom: 20px;
            width: 100%;
            transition: background-color 0.3s ease;
        }
        #addTaskBtn:hover {
            background: #218838;
        }
        #taskList {
            max-height: 450px; 
            overflow-y: auto;
            padding-right: 10px; 
        }
        .task {
            background: #fdfdff; 
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 12px;
            border-left: 5px solid #007bff; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        .task:hover {
            transform: translateY(-2px);
        }
        .task.completed {
            opacity: 0.6;
            border-left-color: #28a745; 
            background-color: #f0f0f0;
        }
        .task-title {
            font-weight: 600;
            font-size: 1.1em;
            color: #333;
        }
        .task-description {
            font-size: 0.9em;
            color: #555;
            margin: 8px 0;
        }
        .task-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        .task-actions button {
            padding: 6px 10px;
            font-size: 13px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: opacity 0.2s ease;
        }
        .task-actions button:hover {
            opacity: 0.8;
        }
        .ai-header {
            background: linear-gradient(135deg, #3a7bd5, #00d2ff);
            color: white;
            padding: 15px;
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
            text-align: center;
            font-weight: bold;
            font-size: 18px;
        }
        #chatBox {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            border-bottom: 1px solid #e0e0e0;
            background-color: #f9f9f9;
        }
        .chat-message {
            margin-bottom: 12px;
            padding: 10px 15px;
            border-radius: 18px; 
            font-size: 15px;
            line-height: 1.5;
            max-width: 80%;
        }
        .user-message {
            background: #007bff;
            color: white;
            text-align: left;
            margin-left: auto; 
            border-bottom-right-radius: 5px;
        }
        .ai-message {
            background: #e9ecef;
            color: #343a40;
            text-align: right;
            margin-right: auto; 
            border-bottom-left-radius: 5px;
        }
        #userInputContainer {
            display: flex;
            padding: 10px;
            border-top: 1px solid #e0e0e0;
            background-color: #fff;
        }
        #userInput {
            flex: 1;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 20px;
            outline: none;
            font-size: 15px;
        }
        #sendChatBtn {
            background: #007bff;
            color: white;
            border: none;
            padding: 0 15px;
            border-radius: 20px;
            margin-right: 8px; 
            cursor: pointer;
            font-size: 16px;
        }

        .filters {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .filter-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 20px; 
            background: #6c757d;
            color: white;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s ease;
        }
        .filter-btn:hover {
            background: #5a6268;
        }
        .filter-btn.active {
            background: #007bff;
            font-weight: bold;
        }
        .modal {
            display: none; 
            position: fixed; 
            z-index: 1000; 
            left: 0;
            top: 0;
            width: 100%; 
            height: 100%; 
            overflow: auto; 
            background-color: rgba(0,0,0,0.6);
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 25px;
            border: 1px solid #888;
            width: 90%;
            max-width: 500px; 
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            position: relative; 
        }
        .modal-content h3, .modal-content h4 {
            margin-top: 0;
            color: #333;
            font-size: 20px;
        }
        .modal-content h4 {
            font-size: 18px;
            color: #007bff;
            margin-top: 15px;
            margin-bottom: 8px;
        }
        .modal-content p, .modal-content ul {
            font-size: 15px;
            line-height: 1.6;
            color: #555;
        }
        .modal-content ul {
            padding-right: 20px; 
            margin-bottom: 15px;
        }
        .modal-content li {
            margin-bottom: 8px;
        }
        .modal-content input[type="text"],
        .modal-content input[type="password"],
        .modal-content textarea,
        .modal-content select,
        .modal-content input[type="date"] {
            width: calc(100% - 22px); 
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 15px;
        }
        .modal-content textarea {
            height: 100px;
            resize: vertical;
        }
        .modal-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }
        .modal-actions button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }
        #saveTaskBtn, #saveApiKeyBtn {
            background-color: #28a745;
            color: white;
        }
        #saveTaskBtn:hover, #saveApiKeyBtn:hover {
            background-color: #218838;
        }
        #cancelTaskBtn, #closeHelpBtn, #cancelApiKeyBtn {
            background-color: #dc3545;
            color: white;
        }
        #cancelTaskBtn:hover, #closeHelpBtn:hover, #cancelApiKeyBtn:hover {
            background-color: #c82333;
        }
        .ai-suggestion-box {
            padding: 10px;
            margin: 10px 0;
            background-color: #e3f2fd;
            border-left: 4px solid #2196f3;
            border-radius: 4px;
            font-size: 0.9em;
        }
        .ai-suggestion-box p {
            margin: 0 0 5px 0;
        }
        .ai-suggestion-box button {
            background-color: #2196f3;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8em;
            margin-top: 5px;
        }
        .close-modal-btn {
            position: absolute;
            top: 15px;
            left: 15px; 
            font-size: 24px;
            font-weight: bold;
            color: #aaa;
            cursor: pointer;
            background: none;
            border: none;
        }
        .close-modal-btn:hover {
            color: #777;
        }

        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }
            .ai-container {
                order: -1; 
                margin-bottom: 20px;
                max-height: 400px;
            }
            .task-container {
                flex: 1;
            }
            header {
                font-size: 20px;
                flex-direction: column;
                gap: 10px;
            }
            .header-buttons {
                display: flex;
                gap: 10px;
            }
            .header-buttons button {
                font-size: 14px;
                padding: 6px 10px;
            }
            #apiStatusIndicator {
                 margin-left: 0; /* Reset margin for smaller screens */
            }
        }
    </style>
    
</head>
<body>

<header>
    <span>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ù…Ø·ÙˆØ± Ø¬Ø¯Ø§Ù‹</span>
    <div class="header-buttons">
        <span id="apiStatusIndicator">Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ: Ù…ØªØµÙ„</span>

        <button id="helpButton">ØŸ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</button>
    </div>
</header>

<div class="main-container">
    <div class="task-container">
        <div class="filters">
            <button class="filter-btn active" data-filter="all">Ø§Ù„ÙƒÙ„</button>
            <button class="filter-btn" data-filter="active">Ù†Ø´Ø·Ø©</button>
            <button class="filter-btn" data-filter="completed">Ù…ÙƒØªÙ…Ù„Ø©</button>
        </div>
        
        <div class="stats">
            <div class="stat">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù‡Ø§Ù…: <span id="totalCount">0</span></div>
            <div class="stat">Ù…Ù‡Ø§Ù… Ù…ÙƒØªÙ…Ù„Ø©: <span id="doneCount">0</span></div>
            <div class="stat">Ù…Ù‡Ø§Ù… Ù†Ø´Ø·Ø©: <span id="activeCount">0</span></div>
        </div>
        
        <button id="addTaskBtn">+ Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
        
        <div id="pomodoroSection">
            <h4>Ù…Ø¤Ù‚Øª Ø§Ù„ØªØ±ÙƒÙŠØ² (Ø¨ÙˆÙ…ÙˆØ¯ÙˆØ±Ùˆ)</h4>
            <div id="pomodoroTimer">25:00</div>
            <div>
                <label for="workDuration">ÙˆÙ‚Øª Ø§Ù„Ø¹Ù…Ù„ (Ø¯Ù‚Ø§Ø¦Ù‚):</label>
                <input type="number" id="workDuration" value="25" min="1">
                <label for="breakDuration">ÙˆÙ‚Øª Ø§Ù„Ø±Ø§Ø­Ø© (Ø¯Ù‚Ø§Ø¦Ù‚):</label>
                <input type="number" id="breakDuration" value="5" min="1">
            </div>
            <button id="startPomodoro">Ø¨Ø¯Ø¡</button>
            <button id="pausePomodoro" disabled>Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª</button>
            <button id="resetPomodoro">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
        </div>
        
        <div id="alertBar" class="alert-bar-container"></div>
        
        <div id="taskList">
            <!-- Ø§Ù„Ù…Ù‡Ø§Ù… Ø³ØªØ¹Ø±Ø¶ Ù‡Ù†Ø§ -->
        </div>
    </div>
    
    <div class="ai-container">
        <div class="ai-header">Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ (Ø±Ø¯ÙˆØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ©)</div>
        <div id="chatBox">
            <div class="ai-message system-message">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ! Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø¥Ø¯Ø§Ø±Ø© Ù…Ù‡Ø§Ù…Ùƒ. ÙŠÙ…ÙƒÙ†Ùƒ Ø£Ù† ØªØ·Ù„Ø¨ Ù…Ù†ÙŠ Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ø§Ù…ØŒ Ø¹Ø±Ø¶Ù‡Ø§ØŒ Ø£Ùˆ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙˆØµÙŠØ§Øª. Ø¬Ø±Ø¨ ÙƒØªØ§Ø¨Ø© "Ù…Ø³Ø§Ø¹Ø¯Ø©" Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ù…Ø²ÙŠØ¯.</div>
        </div>
        <div id="userInputContainer">
            <input type="text" id="chatInput" placeholder="Ø§ÙƒØªØ¨ Ø£Ù…Ø±Ùƒ Ù‡Ù†Ø§... (Ù…Ø«Ø§Ù„: Ø£Ø¶Ù Ù…Ù‡Ù…Ø© Ø´Ø±Ø§Ø¡ Ø§Ù„Ø®Ø¨Ø²)" autocomplete="off">
            <button id="sendChatButton">Ø£Ø±Ø³Ù„</button>
        </div>
         <div id="recommendationsOutput" class="recommendations-container">
            <h4>ØªÙˆØµÙŠØ§Øª Ø°ÙƒÙŠØ©</h4>
            <!-- Ø§Ù„ØªÙˆØµÙŠØ§Øª Ø³ØªØ¹Ø±Ø¶ Ù‡Ù†Ø§ -->
        </div>
    </div>
</div>

<!-- Task Modal -->
<div id="taskModal" class="modal">
    <div class="modal-content">
        <button class="close-modal-btn" onclick="closeTaskModal()">&times;</button>
        <h3>Ø¥Ø¶Ø§ÙØ© / ØªØ¹Ø¯ÙŠÙ„ Ù…Ù‡Ù…Ø©</h3>
        <button id="toggleStaticRepliesBtn" style="margin-bottom: 10px;">ğŸ§  Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø±Ø¯ÙˆØ¯ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©</button>

        <input type="text" id="taskTitleInput" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‡Ù…Ø© (Ù…Ø«Ø§Ù„: Ø§Ø¬ØªÙ…Ø§Ø¹ Ù…Ø¹ ÙØ±ÙŠÙ‚ Ø§Ù„ØªØ³ÙˆÙŠÙ‚)">
        <textarea id="taskDescriptionInput" placeholder="ÙˆØµÙ Ø§Ù„Ù…Ù‡Ù…Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"></textarea>
        <select id="taskPriorityInput">
            <option value="URGENT">Ø¹Ø§Ø¬Ù„</option>
            <option value="IMPORTANT">Ù‡Ø§Ù…</option>
            <option value="NORMAL" selected>Ù…ØªÙˆØ³Ø·</option>
            <option value="LOW">Ù…Ù†Ø®ÙØ¶</option>
        </select>
        <input type="date" id="taskDueDateInput">
        <div class="modal-actions">
            <button id="saveTaskBtn">Ø­ÙØ¸ Ø§Ù„Ù…Ù‡Ù…Ø©</button>
            <button id="cancelTaskBtn">Ø¥Ù„ØºØ§Ø¡</button>
        </div>
    </div>
</div>

<!-- Help Modal -->
<div id="helpModal" class="modal">
    <div class="modal-content">
        <button class="close-modal-btn" onclick="closeHelpModal()">&times;</button>
        <h3>Ø¯Ù„ÙŠÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø°ÙƒÙŠ</h3>
        
        
        <ol>
            <li>Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ <a href="https://huggingface.co/join" target="_blank">huggingface.co/join</a> Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…Ø¬Ø§Ù†ÙŠ.</li>
            <li>Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ØŒ Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø­Ø³Ø§Ø¨Ùƒ (Settings) Ø«Ù… Ø¥Ù„Ù‰ Ù‚Ø³Ù… "Access Tokens".</li>
            <li>Ø£Ù†Ø´Ø¦ Ù…ÙØªØ§Ø­Ø§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹ (New token) Ø¨Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© (Ø¹Ø§Ø¯Ø©Ù‹ "read" ÙƒØ§ÙÙŠØ© Ù„Ù„Ù€ Inference API).</li>
            <li>Ø§Ù†Ø³Ø® Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø°ÙŠ ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡.</li>
            <li>ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ØŒ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± "Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…ÙØªØ§Ø­ API" ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ.</li>
            <li>Ø£Ù„ØµÙ‚ Ø§Ù„Ù…ÙØªØ§Ø­ ÙÙŠ Ø§Ù„Ø­Ù‚Ù„ Ø§Ù„Ù…Ø®ØµØµ ÙˆØ§Ø¶ØºØ· "Ø­ÙØ¸ Ø§Ù„Ù…ÙØªØ§Ø­".</li>
        </ol>
        <p>Ø¨Ù…Ø¬Ø±Ø¯ Ø­ÙØ¸ Ø§Ù„Ù…ÙØªØ§Ø­ØŒ Ø³ÙŠØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø°ÙƒÙŠØ© Ø§Ù„Ù…ØªØµÙ„Ø© Ø¨Ù†Ù…Ø§Ø°Ø¬ Hugging Face.</p>

        <h4>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù…:</h4>
        <ul>
            <li><strong>Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø©:</strong> Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± "+ Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©". Ø§Ù…Ù„Ø£ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†ØŒ Ø§Ù„ÙˆØµÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)ØŒ Ø­Ø¯Ø¯ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© ÙˆØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚ØŒ Ø«Ù… Ø§Ø¶ØºØ· "Ø­ÙØ¸ Ø§Ù„Ù…Ù‡Ù…Ø©".</li>
            <li><strong>ØªØ¹Ø¯ÙŠÙ„ Ù…Ù‡Ù…Ø©:</strong> Ù…Ù† Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…ØŒ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± "ØªØ¹Ø¯ÙŠÙ„" Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©. Ù‚Ù… Ø¨Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø«Ù… Ø§Ø¶ØºØ· "Ø­ÙØ¸ Ø§Ù„Ù…Ù‡Ù…Ø©".</li>
            <li><strong>Ø¥ÙƒÙ…Ø§Ù„ Ù…Ù‡Ù…Ø©:</strong> Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ø¨Ø¬Ø§Ù†Ø¨ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‡Ù…Ø©. ÙŠÙ…ÙƒÙ†Ùƒ Ø£ÙŠØ¶Ø§Ù‹ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„ Ø¨Ø§Ù„Ø¶ØºØ· Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.</li>
            <li><strong>Ø­Ø°Ù Ù…Ù‡Ù…Ø©:</strong> Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± "Ø­Ø°Ù" Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„Ù…Ù‡Ù…Ø©. Ø³ÙŠÙØ·Ù„Ø¨ Ù…Ù†Ùƒ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù.</li>
            <li><strong>ÙÙ„ØªØ±Ø© Ø§Ù„Ù…Ù‡Ø§Ù…:</strong> Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ø²Ø±Ø§Ø± "Ø§Ù„ÙƒÙ„"ØŒ "Ù†Ø´Ø·Ø©"ØŒ "Ù…ÙƒØªÙ…Ù„Ø©" Ø£Ø¹Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‡Ø§Ù… Ø­Ø³Ø¨ Ø­Ø§Ù„ØªÙ‡Ø§.</li>
        </ul>

        <h4>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ (Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©):</h4>
        <p>ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ø¹Ø¨Ø± ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©. Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ ÙˆØ§Ø¶ØºØ· "Ø£Ø±Ø³Ù„". Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙØªØ§Ø­ API Ù…ÙØ¹Ù„Ø§Ù‹ØŒ Ø³ÙŠÙ‚ÙˆÙ… Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø¨Ø§Ù„Ø±Ø¯ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†Ù…Ø§Ø°Ø¬ Ù„ØºÙˆÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø©. Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ø§Ù„Ù…ÙØªØ§Ø­ Ù…ÙØ¹Ù„Ø§Ù‹ØŒ Ø³ØªÙƒÙˆÙ† Ø§Ù„Ø±Ø¯ÙˆØ¯ Ù…Ø­Ø¯ÙˆØ¯Ø© ÙˆÙ…Ø¨Ø±Ù…Ø¬Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹.</p>
        <ul>
            <li><strong>Ù…Ø¹ Ù…ÙØªØ§Ø­ API:</strong> ÙŠÙ…ÙƒÙ†Ùƒ Ø·Ø±Ø­ Ø£Ø³Ø¦Ù„Ø© Ø¹Ø§Ù…Ø©ØŒ Ø·Ù„Ø¨ ØªØ­Ù„ÙŠÙ„ Ù„Ù„Ù…Ù‡Ø§Ù…ØŒ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ù…ÙØµÙ„Ø©ØŒ ÙˆØ£ÙƒØ«Ø±.</li>
            <li><strong>Ø¨Ø¯ÙˆÙ† Ù…ÙØªØ§Ø­ API (ÙˆØ¶Ø¹ Ù…Ø­Ø¯ÙˆØ¯):</strong> ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¬Ø±Ø¨Ø© Ø£ÙˆØ§Ù…Ø± Ø¨Ø³ÙŠØ·Ø© Ù…Ø«Ù„ "Ø£Ø¶Ù Ù…Ù‡Ù…Ø© Ø´Ø±Ø§Ø¡ Ø§Ù„Ø®Ø¨Ø²" Ø£Ùˆ "Ø¹Ø±Ø¶ Ù…Ù‡Ø§Ù…ÙŠ".</li>
        </ul>

        <h4>Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ø£Ø®Ø±Ù‰:</h4>
        <ul>
            <li><strong>Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø§Ù„Ø§Ø³ØªØ¨Ø§Ù‚ÙŠØ©:</strong> Ø£Ø³ÙÙ„ Ø²Ø± "Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©"ØŒ Ù‚Ø¯ ØªØ¸Ù‡Ø± Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø°ÙƒÙŠØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø­Ø§Ù„Ø© Ù…Ù‡Ø§Ù…Ùƒ.</li>
            <li><strong>Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø°ÙƒÙŠ Ù„Ù„Ù…Ù‡Ø§Ù…:</strong> ÙŠØªÙ… ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ù‡Ø§Ù… ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©ØŒ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚ØŒ ÙˆØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡.</li>
        </ul>
        <p>Ù†Ø£Ù…Ù„ Ø£Ù† ÙŠØ³Ø§Ø¹Ø¯Ùƒ Ù‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¹Ù„Ù‰ Ø¥Ø¯Ø§Ø±Ø© Ù…Ù‡Ø§Ù…Ùƒ Ø¨ÙØ¹Ø§Ù„ÙŠØ© ÙˆØ°ÙƒØ§Ø¡!</p>
        <div class="modal-actions" style="margin-top: 20px;">
            <button id="closeHelpBtn" onclick="closeHelpModal()">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¯Ù„ÙŠÙ„</button>
        </div>
    </div>
</div>

<!-- API Key Modal -->
<div id="apiKeyModal" class="modal">
    <div class="modal-content">
        <button class="close-modal-btn" onclick="closeApiKeyModal()">&times;</button>
      
        <input type="password" id="hfApiKeyInput" placeholder="Ø£Ø¯Ø®Ù„ Ù…ÙØªØ§Ø­ Hugging Face API Ù‡Ù†Ø§">
        <p style="font-size:0.9em; color: #666;">ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙØªØ§Ø­ Ù…Ø¬Ø§Ù†ÙŠ Ù…Ù† <a href="https://huggingface.co/settings/tokens" target="_blank">huggingface.co/settings/tokens</a> Ø¨Ø¹Ø¯ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨.</p>
        <div class="modal-actions">
            <button id="saveApiKeyBtn">Ø­ÙØ¸ Ø§Ù„Ù…ÙØªØ§Ø­</button>
            <button id="cancelApiKeyBtn" onclick="closeApiKeyModal()">Ø¥Ù„ØºØ§Ø¡</button>
        </div>
    </div>
</div>
<script src="../static/app.js"></script>

<script>
    // URLs for backend API
    const API_BASE_URL = ""; // Assuming Flask serves static files from root
    const TASKS_API_URL = `${API_BASE_URL}/api/tasks`;
    const RECOMMENDATIONS_API_URL = `${API_BASE_URL}/api/recommendations`;
    const CHAT_API_URL = `${API_BASE_URL}/api/chat`;
    const SET_HF_TOKEN_API_URL = `${API_BASE_URL}/api/set_hf_token`;

    let currentTasks = [];
    let currentFilter = 'all';
    let editingTaskId = null;
    let hfApiToken = localStorage.getItem("hfApiKey_v1") || null; // Load token from local storage

    const taskListDiv = document.getElementById('taskList');
    const addTaskBtn = document.getElementById('addTaskBtn');
    const taskModal = document.getElementById('taskModal');
    const saveTaskBtn = document.getElementById('saveTaskBtn');
    const cancelTaskBtn = document.getElementById('cancelTaskBtn');
    const taskTitleInput = document.getElementById('taskTitleInput');
    const taskDescriptionInput = document.getElementById('taskDescriptionInput');
    const taskPriorityInput = document.getElementById('taskPriorityInput');
    const taskDueDateInput = document.getElementById('taskDueDateInput');

    const helpButton = document.getElementById('helpButton');
    const helpModal = document.getElementById('helpModal');
    const closeHelpBtn = document.getElementById('closeHelpBtn');

    const apiKeySettingsBtn = document.getElementById('apiKeySettingsBtn');
    const apiKeyModal = document.getElementById('apiKeyModal');
    const hfApiKeyInput = document.getElementById('hfApiKeyInput');
    const saveApiKeyBtn = document.getElementById('saveApiKeyBtn');
    const apiStatusIndicator = document.getElementById('apiStatusIndicator');

    const chatBox = document.getElementById('chatBox');
    const userInput = document.getElementById('userInput');
    const sendChatBtn = document.getElementById('sendChatBtn');
    const aiProactiveSuggestionsDiv = document.getElementById('aiProactiveSuggestions');

    // --- API Key Management ---
    function openApiKeyModal() {
        hfApiKeyInput.value = hfApiToken || "";
        apiKeyModal.style.display = 'flex';
    }
    function closeApiKeyModal() {
        apiKeyModal.style.display = 'none';
    }

    async function saveApiKey() {
        const newApiKey = hfApiKeyInput.value.trim();
        if (!newApiKey) {
        
            return;
        }
        try {
            const response = await fetch(SET_HF_TOKEN_API_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ hf_token: newApiKey })
            });
            const result = await response.json();
            if (response.ok) {
                hfApiToken = newApiKey;
                localStorage.setItem("hfApiKey_v1", newApiKey);
                updateApiStatusIndicator(true);
              
                closeApiKeyModal();
            } else {
               
                updateApiStatusIndicator(false);
            }
        } catch (error) {
            console.error("Error saving API key:", error);
            
            updateApiStatusIndicator(false);
        }
    }

    function updateApiStatusIndicator(isConnected) {
        if (isConnected && hfApiToken) {
            apiStatusIndicator.textContent = "Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ: Ù…ØªØµÙ„";
            apiStatusIndicator.classList.add("connected");
        } else {
           
            apiStatusIndicator.classList.remove("connected");
        }
    }

    // --- Task Management Functions ---
    async function fetchTasks() {
        try {
            const response = await fetch(TASKS_API_URL);
            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            currentTasks = await response.json();
            renderTasks();
            updateStats();
            fetchRecommendations(); // Fetch recommendations after tasks are loaded
        } catch (error) {
            console.error("Error fetching tasks:", error);
        }
    }

    function renderTasks() {
        taskListDiv.innerHTML = '';
        const filteredTasks = currentTasks.filter(task => {
            if (currentFilter === 'all') return true;
            if (currentFilter === 'active') return !task.is_completed;
            if (currentFilter === 'completed') return task.is_completed;
            return true;
        });

        if (filteredTasks.length === 0) {
            taskListDiv.innerHTML = '<p style="text-align:center; color:#777;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù… ØªØ·Ø§Ø¨Ù‚ Ù‡Ø°Ø§ Ø§Ù„ÙÙ„ØªØ± Ø­Ø§Ù„ÙŠØ§Ù‹.</p>';
            return;
        }

        filteredTasks.forEach(task => {
            const taskDiv = document.createElement('div');
            taskDiv.className = `task ${task.is_completed ? 'completed' : ''}`;
            taskDiv.dataset.id = task.id;
            
            let priorityText = task.priority;
            if(task.priority === "URGENT") priorityText = "Ø¹Ø§Ø¬Ù„";
            else if(task.priority === "IMPORTANT") priorityText = "Ù‡Ø§Ù…";
            else if(task.priority === "NORMAL") priorityText = "Ù…ØªÙˆØ³Ø·";
            else if(task.priority === "LOW") priorityText = "Ù…Ù†Ø®ÙØ¶";

            taskDiv.innerHTML = `
                <div style="display:flex; justify-content:space-between; align-items:center;">
                    <strong class="task-title">${task.title}</strong>
                    <input type="checkbox" class="complete-checkbox" ${task.is_completed ? 'checked' : ''} data-id="${task.id}">
                </div>
                ${task.description ? `<p class="task-description">${task.description}</p>` : ''}
                <small style="color:#555;">
                    Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©: ${priorityText} 
                    ${task.due_date ? `| ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚: ${new Date(task.due_date).toLocaleDateString('ar-EG')}` : ''}
                </small>
                <div class="task-actions">
                    <button class="edit-btn" data-id="${task.id}">ØªØ¹Ø¯ÙŠÙ„</button>
                    <button class="delete-btn" data-id="${task.id}">Ø­Ø°Ù</button>
                </div>
            `;
            taskListDiv.appendChild(taskDiv);
        });
    }

    function openTaskModal(task = null) {
        editingTaskId = task ? task.id : null;
        taskTitleInput.value = task ? task.title : '';
        taskDescriptionInput.value = task ? task.description : '';
        taskPriorityInput.value = task ? task.priority : 'NORMAL';
        taskDueDateInput.value = task ? (task.due_date ? task.due_date.split('T')[0] : '') : '';
        taskModal.style.display = 'flex';
    }

    function closeTaskModal() {
        taskModal.style.display = 'none';
        editingTaskId = null;
    }

    async function saveTask() {
        const title = taskTitleInput.value.trim();
        const description = taskDescriptionInput.value.trim();
        const priority = taskPriorityInput.value;
        const dueDate = taskDueDateInput.value;

        if (!title) {
            alert('Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‡Ù…Ø© Ù…Ø·Ù„ÙˆØ¨!');
            return;
        }

        const taskData = { title, description, priority, due_date: dueDate || null };
        let url = TASKS_API_URL;
        let method = 'POST';

        // This part is for editing, but the current backend doesn't support PUT for editing tasks directly, only for completion.
        // For a full edit, you'd typically use PUT /api/tasks/{task_id}
        // We'll simplify by just re-adding if editing (or user can delete and re-add)
        // For now, we'll just always POST as new if editingTaskId is set, which is not ideal.
        // A proper PUT endpoint would be needed for true editing.

        try {
            const response = await fetch(url, {
                method: method,
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(taskData)
            });
            if (!response.ok) {
                 const errorData = await response.json();
                 throw new Error(`HTTP error! status: ${response.status}, message: ${errorData.error}`);
            }
            await fetchTasks(); // Refresh task list
            closeTaskModal();
        } catch (error) {
            console.error("Error saving task:", error);
            alert("Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù‡Ù…Ø©: " + error.message);
        }
    }

    async function toggleTaskComplete(taskId) {
        try {
            const response = await fetch(`${TASKS_API_URL}/${taskId}/complete`, { method: 'PUT' });
            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            await fetchTasks();
        } catch (error) {
            console.error("Error toggling task completion:", error);
        }
    }

    async function deleteTask(taskId) {
        if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù‡Ù…Ø©ØŸ')) return;
        try {
            const response = await fetch(`${TASKS_API_URL}/${taskId}`, { method: 'DELETE' });
            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            await fetchTasks();
        } catch (error) {
            console.error("Error deleting task:", error);
        }
    }

    function updateStats() {
        document.getElementById('totalCount').textContent = currentTasks.length;
        document.getElementById('doneCount').textContent = currentTasks.filter(t => t.is_completed).length;
        document.getElementById('activeCount').textContent = currentTasks.filter(t => !t.is_completed).length;
    }

    // --- Chat Functions ---
    function addMessageToChatBox(message, sender) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `chat-message ${sender}`;
        messageDiv.textContent = message;
        chatBox.appendChild(messageDiv);
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    async function sendChatMessage() {
        const messageText = userInput.value.trim();
        if (!messageText) return;

        addMessageToChatBox(messageText, 'user-message');
        userInput.value = '';

        try {
            const response = await fetch(CHAT_API_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ command: messageText })
            });
            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.response || `HTTP error! status: ${response.status}`);
            }
            const result = await response.json();
            addMessageToChatBox(result.response, 'ai-message');
            
            // If the chat command might have affected tasks (e.g., add, complete), refresh tasks
            if (result.response.includes("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‡Ù…Ø©") || result.response.includes("Ø§ÙƒØªÙ…Ù„Øª")) {
                fetchTasks();
            }
        } catch (error) {
            console.error("Error sending chat message:", error);
            addMessageToChatBox("Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø·Ù„Ø¨Ùƒ: " + error.message, 'ai-message');
        }
    }
    
    // --- Recommendation Functions ---
    async function fetchRecommendations() {
        try {
            const response = await fetch(RECOMMENDATIONS_API_URL);
            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            const recommendations = await response.json();
            renderRecommendations(recommendations);
        } catch (error) {
            console.error("Error fetching recommendations:", error);
        }
    }

    function renderRecommendations(recommendations) {
        aiProactiveSuggestionsDiv.innerHTML = '';
        if (recommendations && recommendations.length > 0) {
            const suggestionBox = document.createElement('div');
            suggestionBox.className = 'ai-suggestion-box';
            let html = '<p><strong>ğŸ’¡ Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø°ÙƒÙŠØ©:</strong></p><ul>';
            recommendations.forEach(rec => {
                html += `<li>${rec}</li>`;
            });
            html += '</ul>';
            suggestionBox.innerHTML = html;
            aiProactiveSuggestionsDiv.appendChild(suggestionBox);
        }
    }

    // --- Help Modal Functions ---
    function openHelpModal() {
        helpModal.style.display = 'flex';
    }
    function closeHelpModal() {
        helpModal.style.display = 'none';
    }

    // --- Event Listeners ---
    document.addEventListener('DOMContentLoaded', () => {
        fetchTasks();
        updateApiStatusIndicator(hfApiToken ? true : false);
        if (!hfApiToken) {
        }
    });

    addTaskBtn.addEventListener('click', () => openTaskModal());
    saveTaskBtn.addEventListener('click', saveTask);
    cancelTaskBtn.addEventListener('click', closeTaskModal);

    helpButton.addEventListener('click', openHelpModal);
    closeHelpBtn.addEventListener('click', closeHelpModal);
    
    apiKeySettingsBtn.addEventListener('click', openApiKeyModal);
    saveApiKeyBtn.addEventListener('click', saveApiKey);
    document.getElementById('cancelApiKeyBtn').addEventListener('click', closeApiKeyModal);

    sendChatBtn.addEventListener('click', sendChatMessage);
    userInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') sendChatMessage();
    });

    document.querySelectorAll('.filter-btn').forEach(button => {
        button.addEventListener('click', (e) => {
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            e.target.classList.add('active');
            currentFilter = e.target.dataset.filter;
            renderTasks();
        });
    });

    taskListDiv.addEventListener('click', (e) => {
        if (e.target.classList.contains('complete-checkbox')) {
            toggleTaskComplete(e.target.dataset.id);
        }
        if (e.target.classList.contains('delete-btn')) {
            deleteTask(e.target.dataset.id);
        }
        // Edit button functionality would require a proper PUT endpoint or more complex client-side logic
        // For now, we'll skip direct edit from list to keep it simple with current backend.
        // if (e.target.classList.contains('edit-btn')) {
        //     const taskToEdit = currentTasks.find(t => t.id == e.target.dataset.id);
        //     if(taskToEdit) openTaskModal(taskToEdit);
        // }
    });

    // Close modals if clicked outside content
    window.onclick = function(event) {
        if (event.target == taskModal) closeTaskModal();
        if (event.target == helpModal) closeHelpModal();
        if (event.target == apiKeyModal) closeApiKeyModal();
    }
document.addEventListener("DOMContentLoaded", () => {
    const aiProactiveSuggestionsDiv = document.getElementById("aiProactiveSuggestions");

    const staticSuggestions = [
        {
            "text": "Ù‡Ù„ ØªØ±ØºØ¨ ÙÙŠ Ø¬Ø¯ÙˆÙ„Ø© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©ØŸ",
            "response": "Ù†Ø¹Ù…ØŒ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©. ÙÙ‚Ø· Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± (Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©)."
        },
        {
            "text": "ÙƒÙŠÙ Ø£ØªØ§Ø¨Ø¹ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©ØŸ",
            "response": "ÙŠÙ…ÙƒÙ†Ùƒ ÙÙ„ØªØ±Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ ÙˆØ§Ø®ØªÙŠØ§Ø± 'Ù…ÙƒØªÙ…Ù„Ø©' Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ØªÙŠ Ø£Ù†Ù‡ÙŠØªÙ‡Ø§."
        },
        {
            "text": "Ù…Ø§Ù‡ÙŠ Ø£ÙˆÙ„ÙˆÙŠØ§ØªÙŠ Ù„Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…ØŸ",
            "response": "Ø£ÙˆÙ„ÙˆÙŠØ§ØªÙƒ ØªÙØ¹Ø±Ø¶ Ø¨ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£Ù‡Ù…ÙŠØ© ÙˆØ§Ù„ØªØ§Ø±ÙŠØ® ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…."
        }
    ];

    const timeOptions = ["Ø§Ù„ÙŠÙˆÙ…", "ØºØ¯Ø§Ù‹", "Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ù…Ù‚Ø¨Ù„"];

    if (staticSuggestions.length > 0) {
        const suggestionBox = document.createElement("div");
        suggestionBox.className = "ai-suggestion-box";
        let html = "<p><strong>ğŸ§  Ø±Ø¯ÙˆØ¯ Ø¬Ø§Ù‡Ø²Ø©:</strong></p><ul>";

        staticSuggestions.forEach((item, index) => {
            html += `<li><button class="static-reply" data-reply="${index}">${item.text}</button></li>`;
        });

        html += "</ul><p style='margin-top:10px;'><strong>ğŸ•“ Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ø§Ù„ÙˆÙ‚Øª:</strong></p><div style='display:flex; gap:10px; flex-wrap:wrap;'>";

        timeOptions.forEach(time => {
            html += `<button class="static-time-option">${time}</button>`;
        });

        html += "</div>";
        suggestionBox.innerHTML = html;
        aiProactiveSuggestionsDiv.appendChild(suggestionBox);

        document.querySelectorAll(".static-reply").forEach(btn => {
            btn.addEventListener("click", (e) => {
                const idx = parseInt(e.target.dataset.reply);
                const message = staticSuggestions[idx].response;
                addMessageToChatBox(e.target.textContent, "user-message");
                addMessageToChatBox(message, "ai-message");
            });
        });

        document.querySelectorAll(".static-time-option").forEach(btn => {
            btn.addEventListener("click", (e) => {
                const selectedTime = e.target.textContent;
                addMessageToChatBox(`Ø£Ø±ÙŠØ¯ ØªØ­Ø¯ÙŠØ¯ Ù…Ù‡Ù…Ø© Ù„Ù€: ${selectedTime}`, "user-message");
                addMessageToChatBox(`ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ù‡Ø§Ù… Ø­Ø³Ø¨ Ø§Ù„ÙˆÙ‚Øª: ${selectedTime}.`, "ai-message");
            });
        });
    }
});
document.addEventListener("DOMContentLoaded", () => {
    const aiProactiveSuggestionsDiv = document.getElementById("aiProactiveSuggestions");

    const staticSuggestions = [
        {
            "text": "Ù‡Ù„ ØªØ±ØºØ¨ ÙÙŠ Ø¬Ø¯ÙˆÙ„Ø© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©ØŸ",
            "response": "Ù†Ø¹Ù…ØŒ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©. ÙÙ‚Ø· Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± (Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©)."
        },
        {
            "text": "ÙƒÙŠÙ Ø£ØªØ§Ø¨Ø¹ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©ØŸ",
            "response": "ÙŠÙ…ÙƒÙ†Ùƒ ÙÙ„ØªØ±Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ ÙˆØ§Ø®ØªÙŠØ§Ø± 'Ù…ÙƒØªÙ…Ù„Ø©' Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ØªÙŠ Ø£Ù†Ù‡ÙŠØªÙ‡Ø§."
        },
        {
            "text": "Ù…Ø§Ù‡ÙŠ Ø£ÙˆÙ„ÙˆÙŠØ§ØªÙŠ Ù„Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…ØŸ",
            "response": "Ø£ÙˆÙ„ÙˆÙŠØ§ØªÙƒ ØªÙØ¹Ø±Ø¶ Ø¨ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£Ù‡Ù…ÙŠØ© ÙˆØ§Ù„ØªØ§Ø±ÙŠØ® ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…."
        }
    ];

    const timeOptions = ["Ø§Ù„ÙŠÙˆÙ…", "ØºØ¯Ø§Ù‹", "Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ù…Ù‚Ø¨Ù„"];

    const toggleBtn = document.getElementById("toggleStaticRepliesBtn");

    toggleBtn.addEventListener("click", () => {
        if (aiProactiveSuggestionsDiv.innerHTML.trim() !== "") {
            aiProactiveSuggestionsDiv.innerHTML = "";
            toggleBtn.textContent = "ğŸ§  Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø±Ø¯ÙˆØ¯ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©";
        } else {
            renderStaticSuggestions();
            toggleBtn.textContent = "âŒ Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø±Ø¯ÙˆØ¯ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©";
        }
    });

    function renderStaticSuggestions() {
        const suggestionBox = document.createElement("div");
        suggestionBox.className = "ai-suggestion-box";
        let html = "<p><strong>ğŸ§  Ø±Ø¯ÙˆØ¯ Ø¬Ø§Ù‡Ø²Ø©:</strong></p><ul>";

        staticSuggestions.forEach((item, index) => {
            html += `<li><button class="static-reply" data-reply="${index}">${item.text}</button></li>`;
        });

        html += "</ul><p style='margin-top:10px;'><strong>ğŸ•“ Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ø§Ù„ÙˆÙ‚Øª:</strong></p><div style='display:flex; gap:10px; flex-wrap:wrap;'>";

        timeOptions.forEach(time => {
            html += `<button class="static-time-option">${time}</button>`;
        });

        html += "</div>";
        suggestionBox.innerHTML = html;
        aiProactiveSuggestionsDiv.appendChild(suggestionBox);

        document.querySelectorAll(".static-reply").forEach(btn => {
            btn.addEventListener("click", (e) => {
                const idx = parseInt(e.target.dataset.reply);
                const message = staticSuggestions[idx].response;
                addMessageToChatBox(e.target.textContent, "user-message");
                addMessageToChatBox(message, "ai-message");
            });
        });

        document.querySelectorAll(".static-time-option").forEach(btn => {
            btn.addEventListener("click", (e) => {
                const selectedTime = e.target.textContent;
                addMessageToChatBox(`Ø£Ø±ÙŠØ¯ ØªØ­Ø¯ÙŠØ¯ Ù…Ù‡Ù…Ø© Ù„Ù€: ${selectedTime}`, "user-message");
                addMessageToChatBox(`ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ù‡Ø§Ù… Ø­Ø³Ø¨ Ø§Ù„ÙˆÙ‚Øª: ${selectedTime}.`, "ai-message");
            });
        });
    }
});

</script>
</body>
</html>

